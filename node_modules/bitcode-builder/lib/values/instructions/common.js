"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const assert = require("assert");
function getAggrFieldType(aggrTy, index) {
    if (aggrTy.isStruct()) {
        const field = aggrTy.toStruct().getField(index);
        return field.ty;
    }
    else if (aggrTy.isArray()) {
        const arrayTy = aggrTy.toArray();
        assert(0 <= index && index < arrayTy.length, 'OOB array index in `extractvalue`');
        return arrayTy.elemType;
    }
    else {
        throw new Error('Expected aggregate type, but got: ' + aggrTy.typeString);
    }
}
exports.getAggrFieldType = getAggrFieldType;
function checkAlignment(alignment) {
    assert(1 < alignment, 'Alignment must be greater than zero if present');
    assert.strictEqual(alignment, Math.pow(2, Math.floor(Math.log2(alignment))), 'Alignment must be a power of two if present');
}
exports.checkAlignment = checkAlignment;
//# sourceMappingURL=common.js.map