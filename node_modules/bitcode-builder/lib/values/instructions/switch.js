"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const assert = require("assert");
const types_1 = require("../../types");
const base_1 = require("./base");
class Switch extends base_1.Instruction {
    constructor(condition, otherwise, cases) {
        super(new types_1.Void(), 'switch', [condition, otherwise]);
        this.condition = condition;
        this.otherwise = otherwise;
        this.cases = cases;
        assert(condition.ty.isInt(), 'Switch `condition` must have Int type');
        cases.forEach((c, index) => {
            assert(condition.ty.isEqual(c.value.ty), `Type mismatch for switch clause :${index}`);
            this.operands.push(c.value, c.block);
        });
    }
}
exports.Switch = Switch;
//# sourceMappingURL=switch.js.map