"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const assert = require("assert");
const blob_1 = require("./blob");
const literal_1 = require("./literal");
const operand_1 = require("./operand");
const LENGTH_WIDTH = 6;
class ArrayOp extends operand_1.Operand {
    constructor(elemOp) {
        super();
        this.elemOp = elemOp;
        const isDisallowed = elemOp instanceof literal_1.Literal ||
            elemOp instanceof blob_1.Blob ||
            elemOp instanceof ArrayOp;
        assert(!isDisallowed, 'Array elements can\'t be literals/arrays/blobs');
    }
    encode(writer, value) {
        assert(Array.isArray(value) || typeof value === 'string', 'Array encoding expected Array or string argument');
        const arrValue = value;
        writer.writeVBR(arrValue.length, LENGTH_WIDTH);
        for (const elem of arrValue) {
            this.elemOp.encode(writer, elem);
        }
    }
}
exports.Array = ArrayOp;
//# sourceMappingURL=array.js.map